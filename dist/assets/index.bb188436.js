import{o as c,c as w,u as U,R as N,a as d,t as u,r as k,b as r,d as C,p as g,e as f,f as p,g as v,F as T,w as I,v as R,h as B,i as Q,j as q,k as M,l as D}from"./vendor.bc51ec29.js";const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}};E();const F={setup(e){return(t,a)=>(c(),w(U(N)))}};var _=(e,t)=>{const a=e.__vccOpts||e;for(const[i,s]of t)a[i]=s;return a};const V={props:{buttonText:String},methods:{},data(){return{}}},j={class:"interactBtn"};function z(e,t,a,i,s,n){return c(),d("button",j,u(a.buttonText),1)}var O=_(V,[["render",z],["__scopeId","data-v-12b1c8a2"]]);const H={components:{GreenButton:O},methods:{buttonRedirect:function(){var e=prompt("Pleaser Enter User Client ID");prompt("Pleaser Enter User Client Secret");var t={client_id:e,response_type:"code",redirect_uri:"http://localhost:3000/callback",state:Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2),scope:"user-read-private user-read-email app-remote-control streaming playlist-read-collaborative user-read-currently-playing user-library-read"},a=new URLSearchParams(t);window.location.href=`https://accounts.spotify.com/authorize?${a.toString()}`}},data(){return{}}},y=e=>(g("data-v-1c79ea88"),e=e(),f(),e),G={class:"wrapper"},K={class:"hello"},W=y(()=>r("h1",null,"Mini Player for Spotify",-1)),Y=y(()=>r("br",null,null,-1)),J={class:"textDiv"},X=y(()=>r("h3",null,"Project Description",-1)),Z=y(()=>r("hr",null,null,-1)),ee=y(()=>r("br",null,null,-1)),te=y(()=>r("p",null,`The desktop app for Spotify takes up plenty of screen space, even when it's reduced to its smallest width. The web version of the Spotify player includes a mini player, but it active device has to be the web player instance. This is where Mini Player comes in, it will allow you to control playback and queue songs on whatever device you want. By pressing "Continue", you will be redirected to the spotify authentication page, where you will be able to view the needed permissions of the app. Should you choose to agree with those terms, a new popup window will open. Play any song from your device and the mini should be active. `,-1)),re=y(()=>r("br",null,null,-1));function ae(e,t,a,i,s,n){const o=k("green-button");return c(),d("div",G,[r("div",K,[W,Y,r("div",J,[X,Z,ee,te,re,C(o,{buttonText:"Continue",onClick:n.buttonRedirect},null,8,["onClick"])])])])}var se=_(H,[["render",ae],["__scopeId","data-v-1c79ea88"]]);const ne={methods:{},data(){return{code:"",state:"",client_id:"",client_secret:""}},mounted(){this.client_id=prompt("Pleaser Enter User Client ID"),this.client_secret=prompt("Pleaser Enter User Client Secret");var e=window.location.search,t=new URLSearchParams(e);this.code=t.get("code"),this.state=t.get("state"),console.log(this.code),console.log(this.state);var a=new URLSearchParams({grant_type:"authorization_code",code:this.code,redirect_uri:"http://localhost:3000/callback",show_dialog:!0}),i={headers:{Authorization:`Basic ${btoa(this.client_id+":"+this.client_secret)}`,"Content-Type":"application/x-www-form-urlencoded"}};p.post("https://accounts.spotify.com/api/token",a.toString(),i).then(s=>{console.log(s),localStorage.setItem("spotifyToken",s.data.access_token),localStorage.setItem("refreshSpotifyToken",s.data.refresh_token),window.open("http://localhost:3000/dashboard","popup","width=320,height=700")})}},ie=r("h1",null,"Signed In",-1);function oe(e,t,a,i,s,n){return c(),d("div",null,[ie,r("p",null,u(e.token),1),r("p",null,u(e.refreshToken),1)])}var le=_(ne,[["render",oe]]);const h=p.create({baseURL:"https://api.spotify.com/v1/",headers:{Authorization:`Bearer ${localStorage.getItem("spotifyToken")}`,"Content-Type":"application/json"}});var ce={pausePlayback(){return h.put("me/player/pause")},startPlayback(){return h.put("me/player/play")},skipTrack(){return h.post("me/player/next")},previousTrack(){return h.post("me/player/previous")},setTrackTime(e){return h.put(`me/player/seek?position_ms=${e}`)},playSelectedTrack(e){h.post(`me/player/queue?uri=spotify:track:${e}`).then(t=>{this.skipTrack()})}},ue={getPlaylistFirstTrack(e){h.get(`playlists/${e}/tracks?limit=1`).then(t=>t.data.items[0])},getPlaylists(){var e=[];return h.get("me/playlists").then(t=>{var a=t.data.items;a.map(i=>{e.push({id:i.id,name:i.name,owner:i.owner.display_name,coverArtUrl:i.images[0].url})})}),e}},m={player:ce,playlists:ue},P="/assets/Spotify_Icon_RGB_White.608bf92e.png";const de={methods:{msToTime:function(e){var t=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60);return t<10?`${a}:0${t}`:`${a}:${t}`},pausePlayback:function(){m.player.pausePlayback()},startPlayback:function(){m.player.startPlayback()},skipTrack:function(){m.player.skipTrack()},previousTrack:function(){m.player.previousTrack()},setTrackTime:function(){m.player.setTrackTime(this.$refs.trackProgressBar.value)}},data(){return{rangeSliderValue:this.getRangeValue}},props:{currentSongName:String,currentSongArtist:String,currentCoverArt:String,currentAlbumName:String,explicit:Boolean,playing:Boolean,currentTrackLength:Number,currentTrackTime:Number},computed:{getCurrentTrackTime(){return this.msToTime(this.currentTrackTime)},getCurrentTrackLength(){return this.msToTime(this.currentTrackLength)},bgImageStyle(){return console.log(this.currentCoverArt),{"background-image":`url (${this.currentCoverArt})`}}}},$=e=>(g("data-v-52757fcc"),e=e(),f(),e),pe=$(()=>r("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"},null,-1)),he={class:"wrapper"},me={ref:"albumImageElement",class:"albumDiv"},_e=["src"],ye={class:"playbackControl"},ge={class:"trackMeta"},fe=$(()=>r("img",{src:P,style:{height:"30px",width:"30px"},alt:""},null,-1)),ve={class:"nameArtist"},ke={class:"nameExplicit"},Te={class:"trackName"},be={key:0,class:"material-icons explicit"},Se={class:"timeTrack"},xe=["max","value"];function we(e,t,a,i,s,n){return c(),d(T,null,[pe,r("div",he,[r("div",me,[r("img",{src:a.currentCoverArt,alt:""},null,8,_e)],512),r("div",ye,[r("div",ge,[fe,r("div",ve,[r("div",ke,[r("p",Te,u(a.currentSongName),1),a.explicit?(c(),d("span",be,"explicit")):v("",!0)]),r("p",null,"by "+u(a.currentSongArtist),1)]),r("div",null,[r("p",null,u(a.currentAlbumName),1)])]),r("div",Se,[r("span",null,u(this.getCurrentTrackTime),1),r("input",{onChange:t[0]||(t[0]=(...o)=>n.setTrackTime&&n.setTrackTime(...o)),type:"range",ref:"trackProgressBar",class:"trackTime",name:"trackProgress",min:"0",max:a.currentTrackLength,value:a.currentTrackTime,step:"1000"},null,40,xe),r("span",null,u(this.getCurrentTrackLength),1)]),r("div",null,[r("span",{class:"buttonControl material-icons",onClick:t[1]||(t[1]=(...o)=>n.previousTrack&&n.previousTrack(...o))},"skip_previous"),a.playing?(c(),d("span",{key:0,class:"buttonControl material-icons",onClick:t[2]||(t[2]=(...o)=>n.pausePlayback&&n.pausePlayback(...o))},"pause_circle_filled")):v("",!0),a.playing?v("",!0):(c(),d("span",{key:1,class:"buttonControl material-icons",onClick:t[3]||(t[3]=(...o)=>n.startPlayback&&n.startPlayback(...o))},"play_arrow")),r("span",{class:"buttonControl material-icons",onClick:t[4]||(t[4]=(...o)=>n.skipTrack&&n.skipTrack(...o))},"skip_next")])])])],64)}var Ce=_(de,[["render",we],["__scopeId","data-v-52757fcc"]]);const Pe={emits:["play-selected-track","add-to-queue"],props:{title:String,artist:String,album:String,coverArtUrl:String,id:String},methods:{}},b=e=>(g("data-v-e88e1b26"),e=e(),f(),e),$e=b(()=>r("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"},null,-1)),Ae={class:"smallTrack"},Le=b(()=>r("img",{src:P,style:{height:"22px",width:"22px","margin-right":"8px"},alt:""},null,-1)),Ue={class:"trackData"},Ne=b(()=>r("span",{class:"material-icons"},"play_arrow",-1)),Ie=["src"],Re={class:"smallTrackData"},Be={class:"title"},Qe={class:"artistAndAlbum"},qe={class:"addToQueue"};function Me(e,t,a,i,s,n){return c(),d(T,null,[$e,r("div",Ae,[Le,r("div",Ue,[r("div",{class:"albumArt",onClick:t[0]||(t[0]=o=>e.$emit("play-selected-track",a.id))},[Ne,r("img",{src:a.coverArtUrl,width:"50",height:"50",alt:""},null,8,Ie)]),r("div",Re,[r("span",Be,u(a.title),1),r("span",Qe,u(a.artist)+" - "+u(a.album),1)])]),r("div",qe,[r("span",{onClick:t[1]||(t[1]=o=>e.$emit("add-to-queue",a.id)),class:"material-icons"},"queue")])])],64)}var A=_(Pe,[["render",Me],["__scopeId","data-v-e88e1b26"]]);const De={emits:["select-playlist"],components:{SmallTrack:A},props:{coverURL:String,name:String,owner:String,id:String}},Ee=["src"],Fe={class:"info"},Ve={style:{"font-weight":"600"}};function je(e,t,a,i,s,n){return c(),d("div",{onClick:t[0]||(t[0]=o=>e.$emit("select-playlist",a.id,a.name)),class:"playlist"},[r("img",{src:a.coverURL,alt:"playlist image"},null,8,Ee),r("div",Fe,[r("p",Ve,u(a.name),1),r("p",null,"By "+u(a.owner),1)])])}var ze=_(De,[["render",je],["__scopeId","data-v-5eb098ae"]]);const Oe={components:{Player:Ce,SmallTrack:A,Playlist:ze},methods:{filterList:function(){console.log(this.searchQuery)},getPlaylistFirstTrack:function(e){return m.playlists.getPlaylistFirstTrack(e)},selectPlaylist:function(e,t){t!=this.playlistName&&(this.playlistName=t,this.playlistURL=`https://open.spotify.com/playlist/${e}`,this.queueTracks=[],this.generateQueue(this.getPlaylistFirstTrack(e)))},addToQueue:function(e){p.post(`/v1/me/player/queue?uri=spotify:track:${e}`).then(t=>{this.$refs.queuePopUp.classList+=" queuePopUp-show",setTimeout(()=>{this.$refs.queuePopUp.classList.remove("queuePopUp-show")},2e3)})},playSelectedTrack:function(e){m.player.playSelectedTrack(e)},getPlaylists:function(){this.playlists=m.playlists.getPlaylists(),console.log(this.playlists)},generateQueue:function(e){console.log(this.nextUrlContext),p.get(e).then(t=>{var a=this.isPlaylist?t.data.tracks.items:t.data.items;a.map(i=>{this.queueTracks.push({id:i.track.id,name:i.track.name,artist:i.track.artists[0].name,album:i.track.album.name,coverArtUrl:i.track.album.images[2].url})}),this.nextUrlContext=this.isPlaylist?t.data.tracks.next:t.data.next})},loadMore:function(){this.nextUrlContext&&this.generateQueue(this.nextUrlContext)},getCurrentTrack:function(){p.get("/v1/me/player/currently-playing").then(e=>{if(this.currentTrackTime=e.data.progress_ms,this.currentTrackLength=e.data.item.duration_ms,this.currentSongName=e.data.item.name,this.currentSongArtist=e.data.item.artists[0].name,this.currentAlbumName=e.data.item.album.name,this.currentCoverArt=e.data.item.album.images[0].url,this.currentSongId=e.data.item.id,this.explicit=e.data.item.explicit,this.playing=e.data.is_playing,this.isPlaylist=!!e.data.context,!(this.playlistName=="Your Library"&&e.data.context==null)){try{if(this.playlistURL==e.data.context.href)return}catch(t){console.log(t)}this.queueTracks=[],this.isPlaylist?p.get(e.data.context.href).then(t=>{this.playlistURL=t.data.href,this.playlistName=t.data.name,this.nextUrlContext=this.playlistURL,console.log(t),this.generateQueue(this.nextUrlContext)}):(this.playlistName="Your Library",this.nextUrlContext="/v1/me/tracks",this.generateQueue(this.nextUrlContext))}})},refreshTrack:function(){setInterval(this.getCurrentTrack,1e3)}},data(){return{accessToken:localStorage.getItem("spotifyToken"),refreshToken:localStorage.getItem("refreshSpotifyToken"),currentSongName:null,currentSongArtist:null,currentAlbumName:null,currentCoverArt:null,currentSongId:null,explicit:!1,playing:!1,playlists:[],currentTrackLength:0,currentTrackTime:0,isPlaylist:!1,playlistName:"",playlistURL:"",nextUrlContext:"",allSongs:[],queueTracks:[],searchQuery:""}},mounted(){p.defaults.baseURL="https://api.spotify.com",p.defaults.headers.common.Authorization=`Bearer ${this.accessToken}`,p.defaults.headers.common["Content-Type"]="application/json",this.getCurrentTrack(),this.getPlaylists(),this.refreshTrack()}},S=e=>(g("data-v-534d6a56"),e=e(),f(),e),He={class:"wrapper"},Ge={ref:"queuePopUp",class:"queuePopUp"},Ke=S(()=>r("p",null,"Added to queue!",-1)),We=[Ke],Ye={class:"queuedSongs"},Je={class:"searchDiv"},Xe=S(()=>r("span",{class:"material-icons"},"search",-1)),Ze=S(()=>r("hr",null,null,-1)),et={class:"trackList"};function tt(e,t,a,i,s,n){const o=k("player"),L=k("small-track");return c(),d("div",He,[r("div",Ge,We,512),C(o,{ref:"playerComponent",currentSongName:s.currentSongName,currentSongArtist:s.currentSongArtist,currentAlbumName:s.currentAlbumName,currentCoverArt:s.currentCoverArt,explicit:s.explicit,playing:s.playing,currentTrackLength:s.currentTrackLength,currentTrackTime:s.currentTrackTime},null,8,["currentSongName","currentSongArtist","currentAlbumName","currentCoverArt","explicit","playing","currentTrackLength","currentTrackTime"]),r("div",Ye,[r("h2",null,u(s.playlistName),1),r("div",Je,[Xe,I(r("input",{class:"searchInput",type:"text",onKeyup:t[0]||(t[0]=(...l)=>n.filterList&&n.filterList(...l)),"onUpdate:modelValue":t[1]||(t[1]=l=>s.searchQuery=l),placeholder:"Type search here..."},null,544),[[R,s.searchQuery]])]),Ze,r("ul",et,[(c(!0),d(T,null,B(s.queueTracks,l=>(c(),d("li",{key:l.id},[l.name.toLowerCase().includes(s.searchQuery.toLowerCase())||l.artist.toLowerCase().includes(s.searchQuery.toLowerCase())||s.searchQuery.length==0?(c(),w(L,{key:0,title:l.name,artist:l.artist,album:l.album,coverArtUrl:l.coverArtUrl,id:l.id,onPlaySelectedTrack:n.playSelectedTrack,onAddToQueue:n.addToQueue},null,8,["title","artist","album","coverArtUrl","id","onPlaySelectedTrack","onAddToQueue"])):v("",!0)]))),128))]),r("span",{onClick:t[2]||(t[2]=(...l)=>n.loadMore&&n.loadMore(...l)),class:"loadMore"},"Load More")])])}var rt=_(Oe,[["render",tt],["__scopeId","data-v-534d6a56"]]);const at=Q({history:q("/"),routes:[{path:"/",name:"Home",component:se},{path:"/callback",name:"callback",component:le},{path:"/dashboard",name:"dashboard",component:rt}]}),x=M(F);x.use(D());x.use(at);x.mount("#app");
