import{o as l,c as w,u as U,R as N,a as d,t as u,r as v,b as r,d as P,p as g,e as f,f as p,g as k,F as T,w as I,v as q,h as B,i as M,j as Q,k as R,l as D}from"./vendor.bc51ec29.js";const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}};F();const V={setup(e){return(t,s)=>(l(),w(U(N)))}};var h=(e,t)=>{const s=e.__vccOpts||e;for(const[i,a]of t)s[i]=a;return s};const E={props:{buttonText:String},methods:{},data(){return{}}},j={class:"interactBtn"};function z(e,t,s,i,a,n){return l(),d("button",j,u(s.buttonText),1)}var O=h(E,[["render",z],["__scopeId","data-v-12b1c8a2"]]);const W={components:{GreenButton:O},methods:{},data(){return{}}},y=e=>(g("data-v-2ce99ee8"),e=e(),f(),e),H={class:"wrapper"},G={class:"hello"},K=y(()=>r("h1",null,"Mini Player for Spotify",-1)),Y=y(()=>r("br",null,null,-1)),J={class:"textDiv"},X=y(()=>r("h3",null,"Project Description",-1)),Z=y(()=>r("hr",null,null,-1)),ee=y(()=>r("br",null,null,-1)),te=y(()=>r("p",null,`The desktop app for Spotify takes up plenty of screen space, even when it's reduced to its smallest width. The web version of the Spotify player includes a mini player, but it active device has to be the web player instance. This is where Mini Player comes in, it will allow you to control playback and queue songs on whatever device you want. By pressing "Continue", you will be redirected to the spotify authentication page, where you will be able to view the needed permissions of the app. Should you choose to agree with those terms, a new popup window will open. Play any song from your device and the mini should be active. `,-1)),re=y(()=>r("br",null,null,-1));function ae(e,t,s,i,a,n){const o=v("green-button");return l(),d("div",H,[r("div",G,[K,Y,r("div",J,[X,Z,ee,te,re,P(o,{buttonText:"Continue"})])])])}var se=h(W,[["render",ae],["__scopeId","data-v-2ce99ee8"]]);const ne={methods:{},created(){var e={client_id:this.client_id,response_type:"code",redirect_uri:this.redirect_uri,state:this.state,scope:this.scope},t=new URLSearchParams(e);window.location.href=`https://accounts.spotify.com/authorize?${t.toString()}`},data(){return{token:null,refreshToken:null,client_id:"",client_secret:"",redirect_uri:"http://localhost:3000/callback",stateKey:"spotify_auth_state",state:Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2),scope:"user-read-private user-read-email app-remote-control streaming playlist-read-collaborative user-read-currently-playing user-library-read"}},mounted(){}},ie=r("head",null,[r("title",null,"Spotify Mini Player")],-1),oe=r("h1",null,"Web",-1);function le(e,t,s,i,a,n){return l(),d("html",null,[ie,r("body",null,[oe,r("button",{onClick:t[0]||(t[0]=(...o)=>e.requestAuth&&e.requestAuth(...o))},"Sign in")])])}var ce=h(ne,[["render",le]]);const ue={methods:{},data(){return{code:"",state:"",client_id:"",client_secret:""}},mounted(){this.client_id=prompt("Pleaser Enter User Client ID"),this.client_secret=prompt("Pleaser Enter User Client Secret");var e=window.location.search,t=new URLSearchParams(e);this.code=t.get("code"),this.state=t.get("state"),console.log(this.code),console.log(this.state);var s=new URLSearchParams({grant_type:"authorization_code",code:this.code,redirect_uri:"http://localhost:3000/callback",show_dialog:!0}),i={headers:{Authorization:`Basic ${btoa(this.client_id+":"+this.client_secret)}`,"Content-Type":"application/x-www-form-urlencoded"}};p.post("https://accounts.spotify.com/api/token",s.toString(),i).then(a=>{console.log(a),localStorage.setItem("spotifyToken",a.data.access_token),localStorage.setItem("refreshSpotifyToken",a.data.refresh_token),window.open("http://localhost:3000/dashboard","popup","width=320,height=700")})}},de=r("h1",null,"Signed In",-1);function pe(e,t,s,i,a,n){return l(),d("div",null,[de,r("p",null,u(e.token),1),r("p",null,u(e.refreshToken),1)])}var he=h(ue,[["render",pe]]);const m=p.create({baseURL:"https://api.spotify.com/v1/",headers:{Authorization:`Bearer ${localStorage.getItem("spotifyToken")}`,"Content-Type":"application/json"}});var me={pausePlayback(){return m.put("me/player/pause")},startPlayback(){return m.put("me/player/play")},skipTrack(){return m.post("me/player/next")},previousTrack(){return m.post("me/player/previous")},setTrackTime(e){return m.put(`me/player/seek?position_ms=${e}`)},playSelectedTrack(e){m.post(`me/player/queue?uri=spotify:track:${e}`).then(t=>{this.skipTrack()})}},_e={getPlaylistFirstTrack(e){m.get(`playlists/${e}/tracks?limit=1`).then(t=>t.data.items[0])},getPlaylists(){var e=[];return m.get("me/playlists").then(t=>{var s=t.data.items;s.map(i=>{e.push({id:i.id,name:i.name,owner:i.owner.display_name,coverArtUrl:i.images[0].url})})}),e}},_={player:me,playlists:_e},$="/assets/Spotify_Icon_RGB_White.608bf92e.png";const ye={methods:{msToTime:function(e){var t=Math.floor(e/1e3%60),s=Math.floor(e/1e3/60%60);return t<10?`${s}:0${t}`:`${s}:${t}`},pausePlayback:function(){_.player.pausePlayback()},startPlayback:function(){_.player.startPlayback()},skipTrack:function(){_.player.skipTrack()},previousTrack:function(){_.player.previousTrack()},setTrackTime:function(){_.player.setTrackTime(this.$refs.trackProgressBar.value)}},data(){return{rangeSliderValue:this.getRangeValue}},props:{currentSongName:String,currentSongArtist:String,currentCoverArt:String,currentAlbumName:String,explicit:Boolean,playing:Boolean,currentTrackLength:Number,currentTrackTime:Number},computed:{getCurrentTrackTime(){return this.msToTime(this.currentTrackTime)},getCurrentTrackLength(){return this.msToTime(this.currentTrackLength)},bgImageStyle(){return console.log(this.currentCoverArt),{"background-image":`url (${this.currentCoverArt})`}}}},C=e=>(g("data-v-52757fcc"),e=e(),f(),e),ge=C(()=>r("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"},null,-1)),fe={class:"wrapper"},ke={ref:"albumImageElement",class:"albumDiv"},ve=["src"],Te={class:"playbackControl"},be={class:"trackMeta"},Se=C(()=>r("img",{src:$,style:{height:"30px",width:"30px"},alt:""},null,-1)),xe={class:"nameArtist"},we={class:"nameExplicit"},Pe={class:"trackName"},$e={key:0,class:"material-icons explicit"},Ce={class:"timeTrack"},Ae=["max","value"];function Le(e,t,s,i,a,n){return l(),d(T,null,[ge,r("div",fe,[r("div",ke,[r("img",{src:s.currentCoverArt,alt:""},null,8,ve)],512),r("div",Te,[r("div",be,[Se,r("div",xe,[r("div",we,[r("p",Pe,u(s.currentSongName),1),s.explicit?(l(),d("span",$e,"explicit")):k("",!0)]),r("p",null,"by "+u(s.currentSongArtist),1)]),r("div",null,[r("p",null,u(s.currentAlbumName),1)])]),r("div",Ce,[r("span",null,u(this.getCurrentTrackTime),1),r("input",{onChange:t[0]||(t[0]=(...o)=>n.setTrackTime&&n.setTrackTime(...o)),type:"range",ref:"trackProgressBar",class:"trackTime",name:"trackProgress",min:"0",max:s.currentTrackLength,value:s.currentTrackTime,step:"1000"},null,40,Ae),r("span",null,u(this.getCurrentTrackLength),1)]),r("div",null,[r("span",{class:"buttonControl material-icons",onClick:t[1]||(t[1]=(...o)=>n.previousTrack&&n.previousTrack(...o))},"skip_previous"),s.playing?(l(),d("span",{key:0,class:"buttonControl material-icons",onClick:t[2]||(t[2]=(...o)=>n.pausePlayback&&n.pausePlayback(...o))},"pause_circle_filled")):k("",!0),s.playing?k("",!0):(l(),d("span",{key:1,class:"buttonControl material-icons",onClick:t[3]||(t[3]=(...o)=>n.startPlayback&&n.startPlayback(...o))},"play_arrow")),r("span",{class:"buttonControl material-icons",onClick:t[4]||(t[4]=(...o)=>n.skipTrack&&n.skipTrack(...o))},"skip_next")])])])],64)}var Ue=h(ye,[["render",Le],["__scopeId","data-v-52757fcc"]]);const Ne={emits:["play-selected-track","add-to-queue"],props:{title:String,artist:String,album:String,coverArtUrl:String,id:String},methods:{}},b=e=>(g("data-v-e88e1b26"),e=e(),f(),e),Ie=b(()=>r("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"},null,-1)),qe={class:"smallTrack"},Be=b(()=>r("img",{src:$,style:{height:"22px",width:"22px","margin-right":"8px"},alt:""},null,-1)),Me={class:"trackData"},Qe=b(()=>r("span",{class:"material-icons"},"play_arrow",-1)),Re=["src"],De={class:"smallTrackData"},Fe={class:"title"},Ve={class:"artistAndAlbum"},Ee={class:"addToQueue"};function je(e,t,s,i,a,n){return l(),d(T,null,[Ie,r("div",qe,[Be,r("div",Me,[r("div",{class:"albumArt",onClick:t[0]||(t[0]=o=>e.$emit("play-selected-track",s.id))},[Qe,r("img",{src:s.coverArtUrl,width:"50",height:"50",alt:""},null,8,Re)]),r("div",De,[r("span",Fe,u(s.title),1),r("span",Ve,u(s.artist)+" - "+u(s.album),1)])]),r("div",Ee,[r("span",{onClick:t[1]||(t[1]=o=>e.$emit("add-to-queue",s.id)),class:"material-icons"},"queue")])])],64)}var A=h(Ne,[["render",je],["__scopeId","data-v-e88e1b26"]]);const ze={emits:["select-playlist"],components:{SmallTrack:A},props:{coverURL:String,name:String,owner:String,id:String}},Oe=["src"],We={class:"info"},He={style:{"font-weight":"600"}};function Ge(e,t,s,i,a,n){return l(),d("div",{onClick:t[0]||(t[0]=o=>e.$emit("select-playlist",s.id,s.name)),class:"playlist"},[r("img",{src:s.coverURL,alt:"playlist image"},null,8,Oe),r("div",We,[r("p",He,u(s.name),1),r("p",null,"By "+u(s.owner),1)])])}var Ke=h(ze,[["render",Ge],["__scopeId","data-v-5eb098ae"]]);const Ye={components:{Player:Ue,SmallTrack:A,Playlist:Ke},methods:{filterList:function(){console.log(this.searchQuery)},getPlaylistFirstTrack:function(e){return _.playlists.getPlaylistFirstTrack(e)},selectPlaylist:function(e,t){t!=this.playlistName&&(this.playlistName=t,this.playlistURL=`https://open.spotify.com/playlist/${e}`,this.queueTracks=[],this.generateQueue(this.getPlaylistFirstTrack(e)))},addToQueue:function(e){p.post(`/v1/me/player/queue?uri=spotify:track:${e}`).then(t=>{this.$refs.queuePopUp.classList+=" queuePopUp-show",setTimeout(()=>{this.$refs.queuePopUp.classList.remove("queuePopUp-show")},2e3)})},playSelectedTrack:function(e){_.player.playSelectedTrack(e)},getPlaylists:function(){this.playlists=_.playlists.getPlaylists(),console.log(this.playlists)},generateQueue:function(e){console.log(this.nextUrlContext),p.get(e).then(t=>{var s=this.isPlaylist?t.data.tracks.items:t.data.items;s.map(i=>{this.queueTracks.push({id:i.track.id,name:i.track.name,artist:i.track.artists[0].name,album:i.track.album.name,coverArtUrl:i.track.album.images[2].url})}),this.nextUrlContext=this.isPlaylist?t.data.tracks.next:t.data.next})},loadMore:function(){this.nextUrlContext&&this.generateQueue(this.nextUrlContext)},getCurrentTrack:function(){p.get("/v1/me/player/currently-playing").then(e=>{if(this.currentTrackTime=e.data.progress_ms,this.currentTrackLength=e.data.item.duration_ms,this.currentSongName=e.data.item.name,this.currentSongArtist=e.data.item.artists[0].name,this.currentAlbumName=e.data.item.album.name,this.currentCoverArt=e.data.item.album.images[0].url,this.currentSongId=e.data.item.id,this.explicit=e.data.item.explicit,this.playing=e.data.is_playing,this.isPlaylist=!!e.data.context,!(this.playlistName=="Your Library"&&e.data.context==null)){try{if(this.playlistURL==e.data.context.href)return}catch(t){console.log(t)}this.queueTracks=[],this.isPlaylist?p.get(e.data.context.href).then(t=>{this.playlistURL=t.data.href,this.playlistName=t.data.name,this.nextUrlContext=this.playlistURL,console.log(t),this.generateQueue(this.nextUrlContext)}):(this.playlistName="Your Library",this.nextUrlContext="/v1/me/tracks",this.generateQueue(this.nextUrlContext))}})},refreshTrack:function(){setInterval(this.getCurrentTrack,1e3)}},data(){return{accessToken:localStorage.getItem("spotifyToken"),refreshToken:localStorage.getItem("refreshSpotifyToken"),currentSongName:null,currentSongArtist:null,currentAlbumName:null,currentCoverArt:null,currentSongId:null,explicit:!1,playing:!1,playlists:[],currentTrackLength:0,currentTrackTime:0,isPlaylist:!1,playlistName:"",playlistURL:"",nextUrlContext:"",allSongs:[],queueTracks:[],searchQuery:""}},mounted(){p.defaults.baseURL="https://api.spotify.com",p.defaults.headers.common.Authorization=`Bearer ${this.accessToken}`,p.defaults.headers.common["Content-Type"]="application/json",this.getCurrentTrack(),this.getPlaylists(),this.refreshTrack()}},S=e=>(g("data-v-534d6a56"),e=e(),f(),e),Je={class:"wrapper"},Xe={ref:"queuePopUp",class:"queuePopUp"},Ze=S(()=>r("p",null,"Added to queue!",-1)),et=[Ze],tt={class:"queuedSongs"},rt={class:"searchDiv"},at=S(()=>r("span",{class:"material-icons"},"search",-1)),st=S(()=>r("hr",null,null,-1)),nt={class:"trackList"};function it(e,t,s,i,a,n){const o=v("player"),L=v("small-track");return l(),d("div",Je,[r("div",Xe,et,512),P(o,{ref:"playerComponent",currentSongName:a.currentSongName,currentSongArtist:a.currentSongArtist,currentAlbumName:a.currentAlbumName,currentCoverArt:a.currentCoverArt,explicit:a.explicit,playing:a.playing,currentTrackLength:a.currentTrackLength,currentTrackTime:a.currentTrackTime},null,8,["currentSongName","currentSongArtist","currentAlbumName","currentCoverArt","explicit","playing","currentTrackLength","currentTrackTime"]),r("div",tt,[r("h2",null,u(a.playlistName),1),r("div",rt,[at,I(r("input",{class:"searchInput",type:"text",onKeyup:t[0]||(t[0]=(...c)=>n.filterList&&n.filterList(...c)),"onUpdate:modelValue":t[1]||(t[1]=c=>a.searchQuery=c),placeholder:"Type search here..."},null,544),[[q,a.searchQuery]])]),st,r("ul",nt,[(l(!0),d(T,null,B(a.queueTracks,c=>(l(),d("li",{key:c.id},[c.name.toLowerCase().includes(a.searchQuery.toLowerCase())||c.artist.toLowerCase().includes(a.searchQuery.toLowerCase())||a.searchQuery.length==0?(l(),w(L,{key:0,title:c.name,artist:c.artist,album:c.album,coverArtUrl:c.coverArtUrl,id:c.id,onPlaySelectedTrack:n.playSelectedTrack,onAddToQueue:n.addToQueue},null,8,["title","artist","album","coverArtUrl","id","onPlaySelectedTrack","onAddToQueue"])):k("",!0)]))),128))]),r("span",{onClick:t[2]||(t[2]=(...c)=>n.loadMore&&n.loadMore(...c)),class:"loadMore"},"Load More")])])}var ot=h(Ye,[["render",it],["__scopeId","data-v-534d6a56"]]);const lt=M({history:Q("/"),routes:[{path:"/",name:"Home",component:se},{path:"/webplayer",name:"Web Player",component:ce},{path:"/callback",name:"callback",component:he},{path:"/dashboard",name:"dashboard",component:ot}]}),x=R(V);x.use(D());x.use(lt);x.mount("#app");
